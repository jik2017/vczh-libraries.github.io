<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>GacUI Object Models -- GPU Accelerated C++ User Interface (vczh)</title>
<link rel="shortcut icon" href="../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../global.css">
<link rel="stylesheet" type="text/css" href="../../article.css">
<script src="../../scripts/rootView.js"></script>
<script src="../../scripts/directoryView.js"></script>
<script src="../../scripts/articleView.js"></script>

</head>
<body>
<div id="MVC-ViewContainer"></div>
<script lang="javascript">
{
  const mvcModel = {
  "path": [
    "gacui",
    "kb",
    "gom"
  ]
};
  const mvcViews = [
  {
    "targetObject": "MVC-ViewContainer",
    "viewName": "Gaclib-RootView"
  },
  {
    "targetObject": "rootViewContainer",
    "viewName": "Gaclib-DirectoryView"
  },
  {
    "targetObject": "directoryViewContainer",
    "viewName": "Gaclib-ArticleView"
  }
];
  const hrefPrefix = "/doc/current";
  const directoryInfo = {
  "subNodes": [
    {
      "icon": "-",
      "name": "GacUI",
      "selected": false,
      "path": [
        "gacui",
        "home"
      ],
      "subNodes": [
        {
          "icon": "-",
          "name": "Knowledge Base",
          "selected": false,
          "path": [
            "gacui",
            "kb",
            "home"
          ],
          "subNodes": [
            {
              "icon": " ",
              "name": "GacUI Object Models",
              "selected": true,
              "path": [
                "gacui",
                "kb",
                "gom"
              ]
            },
            {
              "icon": " ",
              "name": "Elements",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "elements"
              ]
            },
            {
              "icon": " ",
              "name": "Compositions",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "compositions"
              ]
            },
            {
              "icon": " ",
              "name": "Controls",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "controls"
              ]
            },
            {
              "icon": " ",
              "name": "Control Templates",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "ctemplates"
              ]
            },
            {
              "icon": " ",
              "name": "Item Templates",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "itemplates"
              ]
            },
            {
              "icon": " ",
              "name": "Default Template Registrations",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "dtemplates"
              ]
            },
            {
              "icon": " ",
              "name": "Application",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "application"
              ]
            },
            {
              "icon": " ",
              "name": "OS Provider",
              "selected": false,
              "path": [
                "gacui",
                "kb",
                "osprovider"
              ]
            }
          ]
        }
      ]
    }
  ]
};
  const article = {
  "index": true,
  "numberBeforeTitle": false,
  "topic": {
    "kind": "Topic",
    "title": "GacUI Object Models",
    "content": [
      {
        "kind": "Paragraph",
        "content": [
          {
            "kind": "Text",
            "text": "\r\n            Most of the important GacUI objects can be categorized into:\r\n            "
          },
          {
            "kind": "List",
            "ordered": false,
            "items": [
              {
                "kind": "ContentListItem",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "Elements"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": ": An element is a renderable graphics object, including shapes, and texts."
                  }
                ]
              },
              {
                "kind": "ContentListItem",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "Compositions"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": ": A composition controls layout with user input events, deciding bounds of elements."
                  }
                ]
              },
              {
                "kind": "ContentListItem",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "Controls"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": ": A control provides a set of functionalities that applications most likely need."
                  }
                ]
              },
              {
                "kind": "ContentListItem",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "Control Templates"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": ": A control template is designed for a certain kind of control, controlling how controls look like."
                  }
                ]
              },
              {
                "kind": "ContentListItem",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "Item Templates"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": ": An item template works like a control template, but it controls repetitive parts in controls, like list items."
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "kind": "Topic",
        "title": "Organization of Objects",
        "content": [
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                GacUI maintains objects in two trees in a window.\r\n                The boundary and user inputs are controlled by "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "GuiWindowComposition"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " and "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "GuiWindow"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": ".\r\n            "
              }
            ]
          },
          {
            "kind": "Topic",
            "title": "Composition Tree",
            "content": [
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "GuiWindowComposition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " is the root object of a composition tree.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    All visible effects and user inputs are handled by a composition tree.\r\n                    A composition could has other compositions as its child compositions,\r\n                    and it could also has up to one element as its child element.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    When a composition has an element,\r\n                    the element fills the whole area of this composition,\r\n                    telling this composition about size constraints.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    A composition can choose to listen to all size constraints of child compositions and the child element.\r\n                    Different kinds of compositions have its own algorithms to controls where to put child compositions,\r\n                    so that child compositions can be required to organized like a list, a table, or even complex behaviors.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    When a composition is hidden,\r\n                    all child composition are also hidden,\r\n                    but the size constraints are still there,\r\n                    they are not ignored while doing layouts.\r\n                "
                  }
                ]
              }
            ]
          },
          {
            "kind": "Topic",
            "title": "Control Tree",
            "content": [
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "GuiWindow"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " is the root object of a control tree.\r\n                    A control controls behaviors of its child controls.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    For example,\r\n                    when a control is disabled,\r\n                    all child controls are also disabled.\r\n                    When a control changes its font,\r\n                    all child controls are also get their fonts changed,\r\n                    unless for those who are explicitly assigned with other fonts.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    When a control is focused,\r\n                    it removes the focus from the last control in the same window.\r\n                    In this case, its "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "focusable composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " receives all keyboard input.\r\n                "
                  }
                ]
              }
            ]
          },
          {
            "kind": "Topic",
            "title": "Control Templates",
            "content": [
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    Visible effects are controlled by control templates or item templates.\r\n                    A control just be assigned a control template when it is created,\r\n                    but another control template can be reassigned to the same control to replace the old control template.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    A control template is a composition,\r\n                    but in order to create visible effects for a control when it is performing some work or handling user inputs,\r\n                    there is more thing in a control template that is specifically designed for a control.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    If you assign a control template to a wrong kind of control,\r\n                    it crashes.\r\n                "
                  }
                ]
              }
            ]
          },
          {
            "kind": "Topic",
            "title": "Item Templates",
            "content": [
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    Some list controls could also be assigned with an item template.\r\n                    Multiple instances of the assigned item template are created when multiple list items are required to display in this control.\r\n                    When a list item is scrolled out of the control,\r\n                    its item template is deleted.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    Instead of relying on compositions,\r\n                    list controls have its own configurable way to organize items,\r\n                    ensuring that an item only takes a minimum resource when it is out of sight.\r\n                "
                  }
                ]
              }
            ]
          },
          {
            "kind": "Topic",
            "title": "Putting Controls and Compositions Together",
            "content": [
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    A control has a "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "bounds composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " and a "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "container composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": ",\r\n                    which are explicitly specified by its control template.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    The "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "bounds composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " is the bounding composition of this control.\r\n                    When a control is placed inside another control or composition,\r\n                    the "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "bounds composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " is placed inside the parent control or composition.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    The "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "container composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " is a place to store controls a compositions that are wanted to be place inside this control.\r\n                    When a control or a composition is placed inside this control,\r\n                    they are placed inside the "
                  },
                  {
                    "kind": "Strong",
                    "content": [
                      {
                        "kind": "Text",
                        "text": "container composition"
                      }
                    ]
                  },
                  {
                    "kind": "Text",
                    "text": " of this control.\r\n                "
                  }
                ]
              },
              {
                "kind": "Paragraph",
                "content": [
                  {
                    "kind": "Text",
                    "text": "\r\n                    Whenever you change the parent-child relationships of controls or compositions,\r\n                    the control tree and the composition tree are automatically maintained.\r\n                "
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "kind": "Topic",
        "title": "Life Cycle",
        "content": [
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                When a composition is deleted,\r\n                all child compositions are also deleted.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                When a control is deleted,\r\n                all child controls are also deleted.\r\n                All compositions inside a deleted control will also be deleted.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                Most of the cases you only need to delete a window,\r\n                which destroys everything.\r\n                But sometimes when you delete a composition that is not the "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "bounds composition"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " of a control while some children are.\r\n                And compositions or controls could be still staying in their parent objects when you are deleting them.\r\n                it could cause memory leaks if you just call the "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "delete"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " operator of C++.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                In order to prevent from all these issues,\r\n                "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "SafeDeleteControl"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " and "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "SafeDeleteComposition"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " are highly recommended to use.\r\n                They handle every possible cases.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                It is safe to delete a "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "GuiWindow"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " by using the "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "delete"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " operator of C++.\r\n            "
              }
            ]
          }
        ]
      },
      {
        "kind": "Topic",
        "title": "Global Objects",
        "content": [
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                There are also some global objects in GacUI applications.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "GuiApplication"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " controls life cycles of all windows,\r\n                and also offers features so that the UI thread and other threads are able to communicate.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "INativeController"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " exposed operating system features.\r\n                When a GacUI application is running on different platforms,\r\n                different "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "INativeController"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": " kicks in.\r\n                To port GacUI to a new platform,\r\n                or to run GacUI in a virtual environment\r\n                (e.g. running all GacUI objects in a window that completely controlled by you, typically when developing games),\r\n                you need to provide your own implementation of "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "INativeController"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": ".\r\n            "
              }
            ]
          }
        ]
      },
      {
        "kind": "Topic",
        "title": "Thread Safety",
        "content": [
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                All GacUI objects and their methods are not thread safe,\r\n                and almost all of them "
              },
              {
                "kind": "Strong",
                "content": [
                  {
                    "kind": "Text",
                    "text": "must only be accessed by the UI thread"
                  }
                ]
              },
              {
                "kind": "Text",
                "text": ",\r\n                even for readonly operations.\r\n            "
              }
            ]
          },
          {
            "kind": "Paragraph",
            "content": [
              {
                "kind": "Text",
                "text": "\r\n                One exception is that,\r\n                when a composition or a control has not been added to a window,\r\n                it can be operated by a non-UI thread.\r\n                But it is still not safe when multiple threads are accessing the same object at the same time.\r\n            "
              }
            ]
          }
        ]
      }
    ]
  }
};
  window["MVC-Resources.mvcModel"] = mvcModel;
  window["MVC-Resources.mvcViews"] = mvcViews;
  window["MVC-Resources.hrefPrefix"] = hrefPrefix;
  window["MVC-Resources.directoryInfo"] = directoryInfo;
  window["MVC-Resources.article"] = article;
  for (const view of mvcViews) {
    window[view.viewName].renderView(mvcModel, document.getElementById(view.targetObject));
  }
  const renderedScriptTags = document.getElementById("MVC-ViewContainer").getElementsByTagName("script");
  for (const scriptTag of renderedScriptTags) {
    eval(
      "(function(){" + scriptTag.innerHTML + "})()"
    );
  }
}
</script>
</body>
</html>
